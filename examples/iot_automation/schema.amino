# IoT Smart Home Automation Schema

struct sensor_data {
    device_id: str,
    temperature: float,
    humidity: float,
    light_level: int,
    motion_detected: bool,
    air_quality_index: int,
    timestamp: str
}

struct device_state {
    device_id: str,
    device_type: str,  # "thermostat", "lights", "security", "fan", "blinds"
    is_online: bool,
    current_setting: float,
    power_consumption: float,
    last_updated: str
}

struct home_context {
    occupancy_status: str,  # "home", "away", "sleep"
    security_mode: str,     # "armed", "disarmed", "night"
    time_of_day: str,       # "morning", "day", "evening", "night"
    season: str,            # "spring", "summer", "fall", "winter"
    energy_saving_mode: bool
}

struct user_preferences {
    preferred_temp_home: float,
    preferred_temp_away: float,
    preferred_temp_sleep: float,
    auto_lights: bool,
    energy_conscious: bool,
    notification_threshold_temp: float
}

# Utility functions for IoT logic  
time_in_range: (str, str, str) -> bool  # current_time, start, end
calculate_energy_cost: (float, float) -> float  # power_kw, hours
get_weather_forecast: (str) -> str  # location -> "sunny", "rainy", "cloudy"
send_notification: (str, str) -> bool  # user_id, message
get_average_consumption: (str, int) -> float  # device_id, days
temp_above_preferred: (float, float, float) -> bool  # current_temp, preferred_temp, threshold
power_above_threshold: (float, float, float) -> bool  # current_power, average_power, multiplier